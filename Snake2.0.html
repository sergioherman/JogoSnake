<!-- 
Fazer o cronômetro
Fazer as configurações
-->

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake</title>
</head>
<body>
    <div id = 'divglobal'>
        <div class = 'caixaexterna' id = 'cabecalho'>
            <div class = 'caixaexterna' id = 'config'>
                <input type="button" value="Config." id="botaoconfig" class="botaoacao" onclick="configurar()">
            </div>
            <div class = 'caixaexterna' id = 'titulo'><h1 id = 'tituloh1' >Snake</h1></div>
            <div class = 'caixaexterna' id = 'placar'>
                <div class = 'caixaexterna' id='cronometro'>
                    <div class = 'conjtxtplacar'>
                        <p class = 'txtplacar' id = titulocrono ></p>
                        <p id='txtcrono' class='txtplacar'></p>
                    </div>
                </div>
                <div class = 'caixaexterna' id='passosdados'>
                    <div class = 'conjtxtplacar'>
                        <p class = 'txtplacar' id = titulopassos >Passos:</p>
                        <p id='passosdadostxt' class='txtplacar'></p>
                    </div>
                </div>
                <div class = 'caixaexterna' id='numerodemacas'>
                    <div class = 'conjtxtplacar'>
                        <p class = 'txtplacar' id = titulonmacas >Maçãs:</p>
                        <p id='txtnummacas' class='txtplacar'></p>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class = 'caixaexterna' id = 'areaquadro'>
            <div id='quadro'></div>
            <div id='letreiro'> <p id='textodoletreiro'></p></div>
        </div>
        <hr>
        <div class = 'caixaexterna' id = 'controle'>
            <div class = 'caixaexterna' id = 'direcional'>
                <div id = divbotaocima class="caixaexterna">
                    <input class = 'botaodirecional' id = 'botaocima' type="button" value='&#9650;' onmouseover="pegadirecao('cima')">
                </div>
                <div id='divbotaoesq' class = 'caixaexterna'>
                    <input class = 'botaodirecional' id = 'botaoesq' type="button" value='&#9668;' onmouseover="pegadirecao('esquerda')">
                </div>
                <div id='divbotaodir' class = 'caixaexterna'>
                    <input class = 'botaodirecional' id = 'botaodir' type="button" value='&#9658;' onmouseover="pegadirecao('direita')">
                </div>
                <div id='divbotaobaixo' class = 'caixaexterna'>
                    <input class = 'botaodirecional' id = 'botaobaixo' type="button" value='&#9660;' onmouseover="pegadirecao('baixo')">
                </div>
            </div>
            <div class = 'caixaexterna' id = 'acao'>
                <table id='tabelaacao'>
                    <tr>
                        <td id='celulabotaorestart'><input class='botaoacao' id='botaorestart' type="button" value='Restart' onclick="restart()"></td>
                    </tr>
                    <tr>
                        <td id='celulabotaopause'><input class='botaoacao' id='botaopause' type="button" value='Pause' onclick="pause()"></td>
                    </tr>
                    <tr>
                        <td id='celulabotaoacelera'><input class = 'botaoacao' id = 'botaoacelera' type="button" value='Acelera' onmouseover="acelera()" onmouseout="frea()"></td>
                    </tr>
                </table>
            </div>   
        </div>
        <div id = 'teladeconfiguracoes'>
            <div id="fechaconfig" onclick="fecharconfig()"><div id="txtfechaconfig">[x]</div></div>
            <div id="corpoconfig">
                <div class = 'tituloconfig'>Tamanho Horizontal:
                    <input type="range" class='brange' id='btamx' value='15' oninput="montaquadro()" max="50" min='5'>
                </div>
                <div class = 'tituloconfig'>Tamanho Vertical:
                    <input type="range" class='brange' id='btamy' value='10' oninput="montaquadro()" max="30" min='5'>
                </div>
                <div class = 'tituloconfig'>Velocidade:
                    <input type="range" class='brange' id='vel' value='4' oninput="alteravelocidade()" max="20" min='1'>
                </div>
            </div>
        </div>
    </div>
    <style>
        #botaoconfig{
            background-color: black;
            color: white;
        }
        #corpoconfig{
            position: absolute;
            top: 20%;
        }
        .tituloconfig{
            margin: 5% 5%;
        }
        .brange{
            margin: 5% 10% 0% 5%;
            width: 100px;
            height: 15px;
        }
        #fechaconfig{
            position: absolute;
            top: 5%;
            left: 95%;
            transform: translate(-100%,0) rotate(5deg);
            background-color: rgba(255, 0, 0, 0.55);
            color: rgba(255, 255, 255, 0.85);
            border: rgba(0, 0, 0, 0.65);
            width: 20%;
            height: 12%;
            margin: 0px;
            border-radius: 20%;
        }
        #txtfechaconfig{
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%) rotate(-15deg);
            margin: 0px;
            font-family: 'Courier New', Courier, monospace;
            font-weight: 600;
            font-size: 80%;
        }
        hr{
            margin: 0px;
        }
        .botaoacao{
            border-radius: 15px;
            font-family: 'Courier New', Courier, monospace;
            font-weight: 600;
            text-shadow: 3px 3px 5px rgba(0, 0, 0, 1);
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }
        .botaodirecional{
            border-radius: 25%;
            text-shadow: 3px 3px 5px rgba(0, 0, 0, 1);
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }
        body{
            background-color: black;
            color: white;
        }
        #divglobal{
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
            margin: 0px;
            padding: 0px;
        }
        .caixaexterna{
            /* box-shadow:0px 0px 3px 1px rgba(255, 255, 255, 0.1) inset; */
        }
        #titulo h1{
            margin: 0px;
            font-size: 18pt;
            text-align: center;
        }
        #quadro{
            margin: auto;
            width: fit-content; /* nao funciona no firefox*/
            width: -moz-fit-content;
            transform: translate(0px,5px);
            /* box-shadow:0px 0px 1px 1px rgba(255, 255, 255, 0.7) inset; */
        }
        .quadrinho{
            box-shadow:1px 2px 1px 0px rgba(255, 255, 255, 0.7) inset;
            border-radius: 20%;
        }
        td p {
            display: none;
        }
        #letreiro{
            position: absolute;
            top: 40%;
            left: 50%;
            /* transform: translate(-50%,-50%); */
            margin: auto;
            background-color: rgba(0, 0, 0, 0.7);
            border: white solid 2px;
            transform: translate(-50%,-50%) rotate(-20deg);
            text-align: center;
            font-family: 'Courier New', Courier, monospace;
            width: fit-content;
            width: -moz-fit-content;
            padding: 20px;
        }
        #textodoletreiro{
            margin: auto;
            position: relative;
            top: 50%;
            transform: translate(0%,-50%);
            text-shadow: 7px 7px 2px rgba(0, 0, 0, 0.65);
            /* margin: auto; */
        }
        .conjtxtplacar{
            position: relative;
            top: 50%;
            transform: translate(0,-50%);
            
        }
        .txtplacar{
            /* border: solid white; */
            text-align: center;
            margin: 0px;
            /* font-size: 10px; */
            transform: rotate(-15deg);
            
        }
        #teladeconfiguracoes{
            position: absolute;
            top: 10%;
            width: 40%;
            height: 55%;
            border: solid white 1px;
            display: none;
            box-shadow:1px 2px 5px 5px rgba(255, 255, 255, 0.7) inset;
            background-color: rgba(0, 0, 0, 0.85);
        }

    </style>
    
    <script>

        window.addEventListener('keydown',function(event){acaoteclado(event.keyCode)})
        window.addEventListener('keyup',function (event){freaespaco(event.keyCode)})
        window.addEventListener("resize", function(){init()})
        window.addEventListener("resize", function(){drawmaca()})
        exibindoconfig = false
        declaracaodevariaveis()
        
        init()
        
        updatemaca()
        drawmaca()

        document.getElementById('letreiro').style.display = 'block'
        document.getElementById('textodoletreiro').innerHTML = 'Start' 
        
        
        delaydeinicio = setTimeout(comecar,tempoinicial)

        function comecar(){
            if (paused == false && exibindoconfig == false){
                apagaletreiro()
                run ()
            }
        }

        function apagaletreiro(){
            document.getElementById('letreiro').style.display='none'
        }

        function init(){
            tamanhodasareas()
            montaquadro()
            montabotoes() //pronto mas falta configurações e placar
            desenhacobrainteira()
            document.getElementById('txtnummacas').innerHTML=nummaca
            document.getElementById('passosdadostxt').innerHTML=passo
        }

        function run(){
            passo++
            document.getElementById('passosdadostxt').innerHTML=passo
            temporizador = setTimeout(run,tempopasso)
            update()
            erase()
            if (fimdojogo == false){
                drawgomo()
                drawmaca()
            }
        }

        function declaracaodevariaveis(){
            temporizador = ''
            document.getElementById('letreiro').style.display='none'
            passo=0
            // tamx = 15 //parseInt(document.getElementById('btamx').value)
            // tamy = 10 //parseInt(document.getElementById('btamy').value)
            cobra = [[1,2,1],[2,2,2],[3,2,0]]
            // cobra = [[1,2,1],[2,2,2],[3,2,3],[4,2,4],[5,2,0]]
            direcao = 'direita'
            tamc = cobra.length
            comeu = false
            apontaatual = cobra[(tamc-2)][2]
            apontaproximo = cobra[(tamc-1)][2]
            velocidade = Number(document.getElementById('vel').value)
            temponormal = 1000/velocidade
            tempoinicial = 1000
            tempoacelerado = temponormal*0.4
            tempopasso = temponormal
            fimdojogo = false
            rabo = rabo = String(cobra[apontaproximo][0]+'-'+cobra[apontaproximo][1])
            gomo = rabo
            paused = false
            nummaca = 0
            // exibindoconfig = false
        }

        function alteravelocidade(){
            velocidade = Number(document.getElementById('vel').value)
            tempopasso = 1000/velocidade
            tempoacelerado = tempopasso*0.4
        }

        function tamanhodasareas(){
            indicereduçãox = 0.95
            indicereduçãoy = 0.9
            larguradajanela = window.innerWidth
            alturadajanela = window.innerHeight


            // Configura a Área do Cabeçalho
            var larguradocabecalho = larguradajanela*1*indicereduçãox
            var alturadocabecalho = alturadajanela*0.1*indicereduçãoy
            document.getElementById('cabecalho').style.width=larguradocabecalho+'px'
            document.getElementById('cabecalho').style.height=alturadocabecalho+'px'
            // document.getElementById('cabecalho').style.backgroundColor='blue'
            
            //Configura a Área de Configurações
            
            var larguradaconfig = larguradajanela*0.3*indicereduçãox
            var alturadaconfig = alturadajanela*0.1*indicereduçãoy
            if (larguradaconfig/alturadaconfig>3){
                fontedaconfig = alturadaconfig*0.3
            }else(fontedaconfig = larguradaconfig*0.3/3)
            document.getElementById('config').style.width=larguradaconfig+'px'
            document.getElementById('config').style.height=alturadaconfig+'px'
            document.getElementById('botaoconfig').style.fontSize=fontedaconfig+'px'
            document.getElementById('corpoconfig').style.fontSize=fontedaconfig+'px'
            // document.getElementById('config').style.backgroundColor='red'

            //Configura a Área do Título
            var larguradotitulo = larguradajanela*0.4*indicereduçãox
            var alturadotitulo = alturadajanela*0.1*indicereduçãoy
            document.getElementById('titulo').style.width=larguradotitulo+'px'
            document.getElementById('titulo').style.height=alturadotitulo+'px'
            document.getElementById('titulo').style.position='relative'
            document.getElementById('titulo').style.top='-'+alturadaconfig+'px'
            document.getElementById('titulo').style.left=larguradaconfig+'px'
            // document.getElementById('titulo').style.backgroundColor='gray'

            //Centralizando Verticalmente o Texto do Título
            var tamfontetitulo = alturadotitulo*0.55
            var deslocverttexttit = (alturadotitulo-tamfontetitulo)/2
            document.getElementById('tituloh1').style.fontSize=tamfontetitulo+'px'
            document.getElementById('tituloh1').style.transform='translate(0px,'+deslocverttexttit+'px)'

            //Configura a Área do Placar
            var larguradoplacar = larguradajanela*0.3*indicereduçãox
            var alturadoplacar = alturadajanela*0.1*indicereduçãoy
            document.getElementById('placar').style.width=larguradoplacar+'px'
            document.getElementById('placar').style.height=alturadoplacar+'px'
            document.getElementById('placar').style.position='relative'
            document.getElementById('placar').style.top='-'+(alturadaconfig+alturadoplacar)+'px'
            document.getElementById('placar').style.left=(larguradaconfig+larguradotitulo)+'px'
            // document.getElementById('placar').style.backgroundColor='orange'
            document.getElementById('cronometro').style.width=(larguradoplacar/3)+'px'
            document.getElementById('cronometro').style.height=(alturadoplacar)+'px'
            document.getElementById('passosdados').style.width=(larguradoplacar/3)+'px'
            document.getElementById('passosdados').style.height=(alturadoplacar)+'px'
            document.getElementById('passosdados').style.position='relative'
            document.getElementById('passosdados').style.top='-'+alturadoplacar+'px'
            document.getElementById('passosdados').style.left=larguradoplacar/3+'px'
            document.getElementById('numerodemacas').style.width=(larguradoplacar/3)+'px'
            document.getElementById('numerodemacas').style.height=(alturadoplacar)+'px'
            document.getElementById('numerodemacas').style.position='relative'
            document.getElementById('numerodemacas').style.left=2*larguradoplacar/3+'px'
            document.getElementById('numerodemacas').style.top='-'+2*alturadoplacar+'px'
            
            if (larguradoplacar/alturadoplacar>5){
                fontedoplacar = alturadoplacar*0.5
            }else(fontedoplacar = larguradoplacar*0.5/5)
            if (fontedoplacar>tamfontetitulo*0.6){fontedoplacar=tamfontetitulo*0.6}
            document.getElementById('cronometro').style.fontSize=fontedoplacar+'px'
            document.getElementById('passosdados').style.fontSize=fontedoplacar+'px'
            document.getElementById('numerodemacas').style.fontSize=fontedoplacar+'px'
                       

            //Configura a Área do areaquadro
            larguraareaquadro = larguradajanela*1*indicereduçãox
            alturaareaquadro = alturadajanela*0.6*indicereduçãoy
            document.getElementById('areaquadro').style.width=larguraareaquadro+'px'
            document.getElementById('areaquadro').style.height=alturaareaquadro+'px'
            // document.getElementById('areaquadro').style.backgroundColor='yellow'

            //Confugura Área do Letreiro
            document.getElementById('letreiro').style.height=alturadotitulo+'px'
            // document.getElementById('letreiro').style.top='-'+alturaareaquadro/2+'px'
            document.getElementById('letreiro').style.fontSize=alturadotitulo*0.6+'px'


            //Configura a Área do Controle
            var larguradocontrole = larguradajanela*1*indicereduçãox
            var alturadocontrole = alturadajanela*0.3*indicereduçãoy
            document.getElementById('controle').style.width=larguradocontrole+'px'
            document.getElementById('controle').style.height=alturadocontrole+'px'

            //Configura a Área do Direcional
            var larguradodirecional = larguradajanela*0.6*indicereduçãox
            var alturadodirecional = alturadajanela*0.3*indicereduçãoy
            document.getElementById('direcional').style.width=larguradodirecional+'px'
            document.getElementById('direcional').style.height=alturadodirecional+'px'
            // document.getElementById('direcional').style.backgroundColor='green'

            //Configura a Área de Ação
            var larguradaacao = larguradajanela*0.4*indicereduçãox
            var alturadaacao = alturadajanela*0.3*indicereduçãoy
            document.getElementById('acao').style.width=larguradaacao+'px'
            document.getElementById('acao').style.height=alturadaacao+'px'
            document.getElementById('acao').style.position='relative'
            document.getElementById('acao').style.top='-'+alturadodirecional+'px'
            document.getElementById('acao').style.left=larguradodirecional+'px'
            // document.getElementById('acao').style.backgroundColor='blue'       
        }
        function montaquadro(){
            tamx = parseInt(document.getElementById('btamx').value)
            tamy = parseInt(document.getElementById('btamy').value)
            var razaowidtamx = Number(larguraareaquadro/tamx)
            var razaoheitamy = Number(alturaareaquadro/tamy)
            if(razaoheitamy<razaowidtamx){menorrazao=razaoheitamy}
            else{menorrazao=razaowidtamx}
            tamq = parseInt(menorrazao)-5
            if (tamq > 50) {tamq = 50}
            texto='<table id = "tabela">'
            for(let nx=1;nx<=tamy;nx++){
                texto+='<tr id = linha'+nx+'>'
                for (let ny=1;ny<=tamx;ny++){
                    texto+='<td class="quadrinho" id = '+ny+'-'+nx+' name="quad" style="width: '+tamq+'px;height: '+tamq+'px;"><p>'+ny+'-'+nx+'</p></td>'}
                texto+='</tr>'
            }
            texto+='</table>'
            document.getElementById('quadro').innerHTML=texto
        }
        function montabotoes(){
            var indicereduçãox = 0.95
            var indicereduçãoy = 0.9
            var redbotdirec=0.9
            var larguradajanela = window.innerWidth
            var alturadajanela = window.innerHeight
            var larguradivdirecional= larguradajanela*0.6*indicereduçãox/3
            var alturadivdirecional= alturadajanela*0.3*indicereduçãoy/3
            var larguradobotaodirecional = larguradivdirecional*indicereduçãox
            var alturadobotaodirecional = alturadivdirecional*indicereduçãoy
            document.getElementById('divbotaocima').style.width=larguradivdirecional+'px'
            document.getElementById('divbotaocima').style.height=alturadivdirecional+'px'
            document.getElementById('divbotaocima').style.position='relative'
            document.getElementById('divbotaocima').style.left=larguradivdirecional+'px'
            document.getElementById('botaocima').style.width=(larguradobotaodirecional*redbotdirec)*alturadajanela/larguradajanela+'px'
            document.getElementById('botaocima').style.height=(alturadobotaodirecional*redbotdirec)+'px'
            document.getElementById('botaocima').style.position='relative'
            document.getElementById('botaocima').style.top='50%'
            document.getElementById('botaocima').style.left='50%'
            document.getElementById('botaocima').style.transform='translate(-50%,-50%)'
            document.getElementById('divbotaoesq').style.width=larguradivdirecional+'px'
            document.getElementById('divbotaoesq').style.height=alturadivdirecional+'px'
            document.getElementById('divbotaoesq').style.position='relative'
            document.getElementById('divbotaoesq').style.left=0+'px'
            document.getElementById('divbotaoesq').style.top=0+'px'
            document.getElementById('botaoesq').style.width=(larguradobotaodirecional*redbotdirec)*alturadajanela/larguradajanela+'px'
            document.getElementById('botaoesq').style.height=(alturadobotaodirecional*redbotdirec)+'px'
            document.getElementById('botaoesq').style.position='relative'
            document.getElementById('botaoesq').style.top='50%'
            document.getElementById('botaoesq').style.left='50%'
            document.getElementById('botaoesq').style.transform='translate(-50%,-50%)'
            document.getElementById('divbotaodir').style.width=larguradivdirecional+'px'
            document.getElementById('divbotaodir').style.height=alturadivdirecional+'px'
            document.getElementById('divbotaodir').style.position='relative'
            document.getElementById('divbotaodir').style.left=2*larguradivdirecional+'px'
            document.getElementById('divbotaodir').style.top=-alturadivdirecional+'px'
            document.getElementById('botaodir').style.width=(larguradobotaodirecional*redbotdirec)*alturadajanela/larguradajanela+'px'
            document.getElementById('botaodir').style.height=(alturadobotaodirecional*redbotdirec)+'px'
            document.getElementById('botaodir').style.position='relative'
            document.getElementById('botaodir').style.top='50%'
            document.getElementById('botaodir').style.left='50%'
            document.getElementById('botaodir').style.transform='translate(-50%,-50%)'
            document.getElementById('divbotaobaixo').style.width=larguradivdirecional+'px'
            document.getElementById('divbotaobaixo').style.height=alturadivdirecional+'px'
            document.getElementById('divbotaobaixo').style.position='relative'
            document.getElementById('divbotaobaixo').style.left=larguradivdirecional+'px'
            document.getElementById('divbotaobaixo').style.top='-'+alturadivdirecional+'px'
            document.getElementById('botaobaixo').style.width=(larguradobotaodirecional*redbotdirec)*alturadajanela/larguradajanela+'px'
            document.getElementById('botaobaixo').style.height=(alturadobotaodirecional*redbotdirec)+'px'
            document.getElementById('botaobaixo').style.position='relative'
            document.getElementById('botaobaixo').style.top='50%'
            document.getElementById('botaobaixo').style.left='50%'
            document.getElementById('botaobaixo').style.transform='translate(-50%,-50%)'
            
            if(alturadobotaodirecional < larguradobotaodirecional){fontedirecional = alturadobotaodirecional}
            else{fontedirecional = larguradobotaodirecional}
            document.getElementById('botaocima').style.fontSize=fontedirecional*0.7+'px'
            document.getElementById('botaoesq').style.fontSize=fontedirecional*0.7+'px'
            document.getElementById('botaodir').style.fontSize=fontedirecional*0.7+'px'
            document.getElementById('botaobaixo').style.fontSize=fontedirecional*0.7+'px'

            var larguradaacao = larguradajanela*0.4*indicereduçãox
            var alturadaacao = alturadajanela*0.3*indicereduçãoy
            var redbotacao=0.9
            document.getElementById('botaorestart').style.width=(larguradaacao*redbotacao*0.8)+'px'
            document.getElementById('botaopause').style.width=(larguradaacao*redbotacao*0.8)+'px'
            document.getElementById('botaoacelera').style.width=(larguradaacao*redbotacao*0.8)+'px'
            document.getElementById('botaorestart').style.height=(alturadaacao*redbotacao*0.25)+'px'
            document.getElementById('botaopause').style.height=(alturadaacao*redbotacao*0.25)+'px'
            document.getElementById('botaoacelera').style.height=(alturadaacao*redbotacao*0.4)+'px'
            document.getElementById('botaoacelera').style.marginTop=(alturadaacao*redbotacao*0.1)+'px'
            document.getElementById('tabelaacao').style.margin='auto'
            document.getElementById('botaorestart').style.fontSize=(alturadaacao*redbotacao*0.25*0.45)+'px'
            document.getElementById('botaopause').style.fontSize=(alturadaacao*redbotacao*0.25*0.45)+'px'
            document.getElementById('botaoacelera').style.fontSize=(alturadaacao*redbotacao*0.25*0.45)+'px'
            document.getElementById('botaoconfig').style.position='relative'
            document.getElementById('botaoconfig').style.top='50%'
            document.getElementById('botaoconfig').style.left='50%'
            document.getElementById('botaoconfig').style.transform='translate(-50%,-50%)'
            document.getElementById('botaoconfig').style.width=larguradajanela*0.3*indicereduçãox*0.8+'px'
            document.getElementById('botaoconfig').style.height=alturadajanela*0.1*indicereduçãoy*0.7+'px'
        }
        
        function desenhacobrainteira(){
            for(let nn=0; nn<tamc; nn++){
                if(cobra[nn][0]>0 && cobra[nn][0]<=tamx && cobra[nn][1] > 0 && cobra[nn][1] < tamy){
                    gomo = String(cobra[nn][0]) +'-'+ String(cobra[nn][1])
                    document.getElementById(gomo).style.backgroundColor= 'white'
                    document.getElementById(gomo).style.borderRadius='30%'
                }
            }
        }

        function update(){
            updatecobra()
            // document.getElementById('config').innerHTML=''
            //Verifica se comeu a maçã
            if (String(cobra[apontaatual][0]) == String(maca[0]) && String(cobra[apontaatual][1]) == String(maca[1])) {
                nummaca ++
                document.getElementById('txtnummacas').innerHTML=nummaca
                updatemaca()
                aumentacobra()
            }
            //Verifico se bateu nela mesma
            estavaindopara=direcao
            for (let ii = 0; ii < tamc; ii++){
                if (ii != apontaatual){
                    if (String(cobra[apontaatual][0]) == String(cobra[ii][0]) && String(cobra[apontaatual][1]) == String(cobra[ii][1])) {
                    gameover()
                    }
                }
            }

            // Verifica se bateu na parede
            if (cobra[apontaatual][0]>tamx || cobra[apontaatual][1]<1 || cobra[apontaatual][1]>tamy || cobra[apontaatual][0]<1) { 
                gameover()      
            }
        }
        function updatecobra(){
            tamc=cobra.length
            rabo = String(cobra[apontaproximo][0]+'-'+cobra[apontaproximo][1])
            if (direcao == 'direita') {cobra[apontaproximo]=[cobra[apontaatual][0]+1,cobra[apontaatual][1],cobra[apontaproximo][2]]}
            if (direcao == 'esquerda') {cobra[apontaproximo]=[cobra[apontaatual][0]-1,cobra[apontaatual][1],cobra[apontaproximo][2]]}
            if (direcao == 'cima') {cobra[apontaproximo]=[cobra[apontaatual][0],cobra[apontaatual][1]-1,cobra[apontaproximo][2]]}
            if (direcao == 'baixo') {cobra[apontaproximo]=[cobra[apontaatual][0],cobra[apontaatual][1]+1,cobra[apontaproximo][2]]}
            gomo = String(cobra[apontaproximo][0]+'-'+cobra[apontaproximo][1])
            
            apontaproximo = cobra[apontaproximo][2]
            apontaatual = cobra[apontaatual][2]

        }
        function updatemaca(){
            maca = [parseInt(1+(tamx*Math.random())),parseInt(1+(tamy*Math.random()))]
            var mudadenovo = true
            while (mudadenovo){
                mudadenovo = false
                for (let mm = 0; mm < tamc; mm++){
                    if (String(cobra[mm][0])+','+String(cobra[mm][1]) == String(maca)){
                        maca = [parseInt(1+(tamx*Math.random())),parseInt(1+(tamy*Math.random()))]
                        mudadenovo = true
                    }
                }
            }
            vermelho = String(maca[0]) +'-'+ String(maca[1])
        }
        function aumentacobra(){
            cobra[tamc] = [cobra[apontaproximo][0],cobra[apontaproximo][1]]
            cobra[tamc][2]=cobra[apontaatual][2]
            cobra[apontaatual][2]=tamc
            apontaproximo=tamc
        }

        function drawmaca(){
            document.getElementById(vermelho).style.backgroundColor= 'red'
            document.getElementById(vermelho).style.borderRadius='50%'
            document.getElementById(vermelho).style.boxShadow='0px 0px 5px 2px rgba(255, 200, 0, 0.5) inset'
        }
        function drawgomo(){
            document.getElementById(gomo).style.backgroundColor= 'white'
            document.getElementById(gomo).style.borderRadius='30%'
        }        
        function erase(){
            document.getElementById(rabo).style.backgroundColor= 'black'
            document.getElementById(rabo).style.borderRadius='20%'
            document.getElementById(rabo).style.boxShadow='1px 2px 1px 0px rgba(255, 255, 255, 0.7) inset'
        }

        function gameover(){
            clearTimeout(temporizador)
            fimdojogo = true
            document.getElementById('textodoletreiro').innerHTML='Game Over'
            document.getElementById('letreiro').style.display='block'
        }

        function restart(){
            clearTimeout(delaydeinicio)
            clearTimeout(temporizador)

            declaracaodevariaveis()
            init()
            
            updatemaca()
            drawmaca()

            document.getElementById('letreiro').style.display = 'block'
            document.getElementById('textodoletreiro').innerHTML = 'Start' 
            
            
            delaydeinicio = setTimeout(comecar,tempoinicial)
            
        }

        function pause(){
            if (fimdojogo == false){
                if (paused == false){
                    paused = true
                    document.getElementById('textodoletreiro').innerHTML='Paused'
                    document.getElementById('letreiro').style.display='block'
                    clearTimeout(temporizador)
                
                } else {
                    if (exibindoconfig == false){
                        clearTimeout(temporizador)
                        paused = false
                        document.getElementById('letreiro').style.display='none'
                        clearTimeout(temporizador)
                        setTimeout(run,tempopasso)
                    }
                }
            }
        }   
        function acelera(){
            tempopasso = tempoacelerado
        }
        function frea(){
            tempopasso = temponormal
        }

        function pegadirecao(botaoapertado){
            if ((estavaindopara == 'baixo' && botaoapertado == 'cima')||
                (estavaindopara == 'cima' && botaoapertado == 'baixo')||
                (estavaindopara == 'esquerda' && botaoapertado == 'direita')||
                (estavaindopara == 'direita' && botaoapertado == 'esquerda')){}
            else{direcao=botaoapertado}
        }
        function acaoteclado(codigotecla){
            // alert(codigodatecla)
            if ((codigotecla == 37 || codigotecla == 65) && (estavaindopara != 'direita')&&(estavaindopara != 'esquerda')) {direcao = 'esquerda'}
            if ((codigotecla == 38 || codigotecla == 87) && (estavaindopara != 'baixo')&&(estavaindopara != 'cima')) {direcao = 'cima'}
            if ((codigotecla == 39 || codigotecla == 68) && (estavaindopara != 'esquerda')&&(estavaindopara != 'direita')) {direcao = 'direita'}
            if ((codigotecla == 40 || codigotecla == 83) && (estavaindopara != 'cima')&&(estavaindopara != 'baixo')) {direcao = 'baixo'}

            if (codigotecla == 80){pause()}
            if(codigotecla==82) {restart()}

            if(codigotecla==88) {tempopasso = tempoacelerado}
            if(codigotecla==90) {tempopasso = temponormal}
            // if(tecla==67) {
            //     epraacelerar=true
            //     primeiropassoac = true
            // }
            if (codigotecla == 32){acelera()}
        }
        function freaespaco(codtec){
            if (codtec == 32){frea()}
        }

        function fecharconfig(){
            document.getElementById('teladeconfiguracoes').style.display='none'
            exibindoconfig = false
            if (paused == false){
                delaydeinicio = setTimeout(comecar,tempoinicial)
            }
        }
        function configurar(){
            paused = true
            document.getElementById('textodoletreiro').innerHTML='Paused'
            document.getElementById('letreiro').style.display='block'
            clearTimeout(temporizador)
            document.getElementById('teladeconfiguracoes').style.display='block'
            exibindoconfig = true    
        }

</script>
</body>
</html>